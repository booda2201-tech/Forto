<!-- <div class="invoices-page p-4" dir="rtl">
  <div class="header-box mb-4 d-flex justify-content-between align-items-center">
    <h3 class="fw-bold text-dark"> سجل الفواتير </h3>
    <span class="badge bg-success rounded-pill px-3 py-2">مكتمل</span>
  </div>

  <div class="card border-0 shadow-sm rounded-4 overflow-hidden">
    <div class="table-responsive">
      <table class="table table-hover align-middle mb-0 text-center">
        <thead class="bg-light">
          <tr class="text-muted small">
            <th class="py-3">رقم الفاتورة</th>
            <th>العميل</th>
            <th>الخدمات</th>
            <th> المبلغ </th> <th>التاريخ</th>
            <th>التحكم</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let invoice of invoices$ | async">
            <td class="fw-bold text-orange">#{{invoice.id}}</td>
            <td class="text-end">
              <div class="fw-bold">{{invoice.customerName}}</div>
              <small class="text-muted">{{invoice.phone}}</small>
            </td>
            <td>
              <span class="badge bg-light text-dark border me-1" *ngFor="let s of invoice.serviceItem">
                {{s.name}}
              </span>
            </td>
            <td>
              <span class="fs-5 fw-bold text-success">
                {{ calculateFinalTotal(invoice) | number:'1.2-2' }} ج.م
              </span>
            </td>
            <td class="small text-muted">{{invoice.appointmentDate}}</td>
            <td>
              <div class="btn-group gap-2">
                <button class="btn btn-sm btn-light border rounded-3" (click)="exportToExcel(invoice)">
                  <i class="bi bi-file-earmark-excel text-success"></i> تعديل في Excel
                </button>
                <button class="btn btn-sm btn-orange text-white rounded-3">
                  <i class="bi bi-printer"></i>
                </button>
              </div>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div> -->


<div class="invoices-page p-2 p-md-4" dir="rtl">
  <div class="header-box mb-4 d-flex justify-content-between align-items-center flex-wrap gap-2">
    <h3 class="fw-bold text-dark mb-0">سجل الفواتير</h3>
    <span class="badge bg-success rounded-pill px-3 py-2">مكتمل</span>
  </div>

  <div class="card border-0 shadow-sm rounded-4 overflow-hidden">
    <div class="table-responsive">
      <table class="table table-hover align-middle mb-0 text-center">
        <thead class="bg-light">
          <tr class="text-muted small">
            <th class="text">رقم الفاتورة</th>
            <th class="text-end">العميل</th>
            <th class="d-none d-md-table-cell">الخدمات</th>
            <th>المبلغ</th>
            <th class="d-none d-lg-table-cell">التاريخ</th>
            <th>التحكم</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let invoice of invoices$ | async">
            <td class="fw-bold text-orange">#{{invoice.id}}</td>
            <td class="text-end">
              <div class="fw-bold text-truncate" style="max-width: 120px;">{{invoice.customerName}}</div>
              <small class="text-muted d-none d-sm-block">{{invoice.phone}}</small>
            </td>
            <td class="d-none d-md-table-cell">
              <div class="d-flex flex-wrap justify-content-center gap-1">
                <span class="badge bg-light text-dark border small" *ngFor="let s of invoice.serviceItem">
                  {{s.name}}
                </span>
              </div>
            </td>
            <td>
              <span class="fw-bold text-success text-nowrap">
                {{ calculateFinalTotal(invoice) | number:'1.1-1' }} <small>ج.م</small>
              </span>
            </td>
            <td class="small text-muted d-none d-lg-table-cell">{{invoice.appointmentDate}}</td>
            <td>
              <div class="d-flex justify-content-center gap-1 gap-md-2">
                <button class="btn btn-sm btn-outline-success rounded-3" (click)="exportToExcel(invoice)" title="تصدير Excel">
                  <i class="bi bi-file-earmark-excel"></i>
                  <span class="d-none d-xl-inline ms-1">Excel</span>
                </button>
                <button class="btn btn-sm btn-orange text-white rounded-3">
                  <i class="bi bi-printer"></i>
                </button>
              </div>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>
